// Dream Interpretation Knowledge Base
const dreamMeanings = {
    // น้ำและธาตุ
    water: {
        keyword: ["น้ำ", "water", "แม่น้ำ", "ทะเล", "มหาสมุทร", "น้ำท่วม"],
        meaning: "น้ำในความฝันสื่อถึงอารมณ์และจิตใต้สำนึก",
        interpretation: {
            clear: "น้ำใส - อารมณ์สงบ จิตใจแจ่มใส มีความสุข ความรักราบรื่น",
            dirty: "น้ำขุ่น - ความสับสน อารมณ์ไม่มั่นคง มีปัญหาในใจที่ยังไม่แก้ไข",
            flood: "น้ำท่วม - ความรู้สึกท่วมท้น ควบคุมอารมณ์ไม่ได้ มีเรื่องกดดันมากเกินไป",
            calm: "น้ำนิ่ง - ความสงบภายใน ชีวิตมีสมดุล ควรรักษาสภาวะนี้ไว้",
            wave: "คลื่นใหญ่ - อารมณ์รุนแรง ความเปลี่ยนแปลงกำลังมา เตรียมตัวรับมือ"
        }
    },
    
    fire: {
        keyword: ["ไฟ", "fire", "ไฟไหม้", "เปลวไฟ", "ควัน"],
        meaning: "ไฟสื่อถึงพลังงาน ความปรารถนา ความโกรธ หรือการเปลี่ยนแปลง",
        interpretation: {
            normal: "ไฟปกติ - พลังงานสูง มีความกระตือรือร้น โอกาสใหม่กำลังมา",
            destructive: "ไฟไหม้บ้าน - ความโกรธ การทำลาย ต้องระวังความขัดแย้ง",
            controlled: "ไฟในเตา - ความอบอุ่นในครอบครัว การควบคุมอารมณ์ได้ดี",
            smoke: "ควันไฟ - สิ่งที่ยังไม่ชัดเจน ความสับสน ควรรอให้เห็นภาพชัดก่อนตัดสินใจ"
        }
    },
    
    // การเคลื่อนไหว
    flying: {
        keyword: ["บิน", "flying", "ลอย", "โบยบิน", "ลอยฟ้า"],
        meaning: "การบินสื่อถึงความต้องการเสรีภาพ ความทะเยอทะยาน หรือการหลบหนี",
        interpretation: {
            high: "บินสูง - ความทะเยอทะยาน มีเป้าหมายสูง ความมั่นใจ กำลังจะประสบความสำเร็จ",
            low: "บินต่ำ - ไม่มั่นใจในตัวเอง กลัวความล้มเหลว ควรเพิ่มความมั่นใจ",
            free: "บินได้อิสระ - รู้สึกเป็นอิสระ ปลอดจากข้อจำกัด ชีวิตราบรื่น",
            struggle: "บินลำบาก - มีอุปสรรค รู้สึกถูกกดดัน ต้องการเสรีภาพมากขึ้น"
        }
    },
    
    falling: {
        keyword: ["ตก", "falling", "ตกลงมา", "ร่วง", "หกล้ม"],
        meaning: "การตกสื่อถึงความกลัว การสูญเสียการควบคุม ความไม่มั่นคง",
        interpretation: {
            general: "ตกจากที่สูง - ความกลัวความล้มเหลว ไม่มั่นใจ กังวลเรื่องอนาคต",
            saved: "ตกแต่วมีคนช่วย - จะมีคนช่วยเหลือในยามคับขัน อย่าท้อแท้",
            hurt: "ตกแล้วเจ็บ - กำลังเผชิญกับความล้มเหลว ต้องรับมือกับผลที่ตามมา",
            nohurt: "ตกแต่ไม่เจ็บ - แม้จะมีปัญหา แต่จะผ่านไปได้โดยไม่ได้รับผลกระทบมาก"
        }
    },
    
    chasing: {
        keyword: ["ถูกไล่", "ถูกตาม", "chase", "หนี", "วิ่งหนี"],
        meaning: "การถูกไล่สื่อถึงความกลัว การหลบหนีปัญหา สิ่งที่ยังไม่เสร็จ",
        interpretation: {
            general: "ถูกไล่โดยทั่วไป - หนีจากปัญหา ความกลัว ควรหันมาเผชิญหน้า",
            caught: "ถูกจับได้ - ต้องเผชิญหน้ากับสิ่งที่หลีกเลี่ยง ถึงเวลาแก้ปัญหา",
            escape: "หนีรอด - จะสามารถหลีกเลี่ยงปัญหาได้ มีทางออก",
            monster: "ถูกสัตว์ประหลาดไล่ - กลัวสิ่งที่ไม่รู้จัก ความกังวลภายใน"
        }
    },
    
    // ผู้คน
    death: {
        keyword: ["ตาย", "death", "เสียชีวิต", "ศพ", "งานศพ"],
        meaning: "ความตายไม่ได้หมายถึงความตายจริง แต่หมายถึงการเปลี่ยนแปลงครั้งใหญ่",
        interpretation: {
            self: "ตัวเองตาย - การเริ่มต้นใหม่ การเปลี่ยนแปลงครั้งใหญ่ การละทิ้งอดีต",
            others: "คนอื่นตาย - ความสัมพันธ์กำลังเปลี่ยนแปลง บางสิ่งกำลังจบลง",
            parents: "พ่อแม่ตาย - ความกังวลเกี่ยวกับครอบครัว ความเป็นอิสระมากขึ้น",
            corpse: "เห็นศพ - อดีตที่ยังติดค้าง สิ่งที่ควรปล่อยวาง"
        }
    },
    
    pregnancy: {
        keyword: ["ท้อง", "pregnant", "ตั้งครรภ์", "มีลูก", "คลอด"],
        meaning: "การตั้งครรภ์สื่อถึงความคิดใหม่ โครงการใหม่ การเริ่มต้นใหม่",
        interpretation: {
            self: "ตัวเองท้อง - มีแนวคิดใหม่ โครงการใหม่กำลังเกิดขึ้น ความคิดสร้างสรรค์",
            give_birth: "คลอดลูก - โครงการสำเร็จ ความคิดเป็นรูปเป็นร่าง ความสำเร็จใกล้แล้ว",
            others: "คนอื่นท้อง - คนรอบข้างมีโอกาสใหม่ ความเปลี่ยนแปลงในสังคม",
            miscarriage: "แท้ง - โครงการล้มเหลว แนวคิดยังไม่เหมาะกับเวลานี้"
        }
    },
    
    ex_lover: {
        keyword: ["แฟนเก่า", "ex", "อดีตรัก", "คนรักเก่า"],
        meaning: "แฟนเก่าสื่อถึงอดีตที่ยังติดค้าง ความรู้สึกที่ยังไม่จบ หรือบทเรียน",
        interpretation: {
            talk: "คุยกับแฟนเก่า - อดีตที่ยังคิดถึง บทเรียนที่ยังไม่เรียนรู้จบ",
            back: "แฟนเก่ากลับมา - ความทรงจำกลับมาหลอกหลอน หรือโอกาสที่กลับมาอีกครั้ง",
            fight: "ทะเลาะกับแฟนเก่า - ความโกรธที่ยังไม่หาย ควรปล่อยวาง",
            happy: "มีความสุขกับแฟนเก่า - คิดถึงช่วงเวลาดีๆ แต่อยู่กับปัจจุบันดีกว่า"
        }
    },
    
    wedding: {
        keyword: ["งานแต่ง", "wedding", "แต่งงาน", "เจ้าบ่าว", "เจ้าสาว"],
        meaning: "งานแต่งงานสื่อถึงการรวมกัน ข้อผูกพัน การตัดสินใจสำคัญ",
        interpretation: {
            own: "แต่งงานเอง - ข้อผูกพันใหม่ ความมุ่งมั่นกับบางสิ่ง การตัดสินใจสำคัญ",
            others: "คนอื่นแต่งงาน - ความเปลี่ยนแปลงในชีวิตคนรอบข้าง รู้สึกถูกทิ้งไว้ข้างหลัง",
            stranger: "แต่งกับคนแปลกหน้า - การเปลี่ยนแปลงที่ไม่คาดคิด โอกาสใหม่ที่ไม่ทันตั้งตัว",
            cancel: "งานแต่งงานยกเลิก - ความกังวลเรื่องข้อผูกพัน กลัวการตัดสินใจผิด"
        }
    },
    
    // สัตว์
    snake: {
        keyword: ["งู", "snake", "เห่า", "จงอาง"],
        meaning: "งูสื่อถึงการเปลี่ยนแปลง ภัยคุกคาม ความรู้ลับลึก หรือคนหักหลัง",
        interpretation: {
            bite: "งูกัด - มีคนทรยศหักหลัง ระวังภัยใกล้ตัว ปัญหากำลังมา",
            kill: "ฆ่างู - เอาชนะอุปสรรค เอาชนะศัตรู ปัญหาจะคลี่คลาย",
            many: "งูเยอะ - ปัญหามากมาย รู้สึกถูกคุกคาม ความเครียดสูง",
            gold: "งูทอง - โชคลาภ ความรู้ลึกซึ้ง การเปลี่ยนแปลงในทางที่ดี"
        }
    },
    
    dog: {
        keyword: ["สุนัข", "dog", "หมา"],
        meaning: "สุนัขสื่อถึงความซื่อสัตย์ มิตรภาพ การปกป้อง หรือสัญชาตญาณ",
        interpretation: {
            friendly: "สุนัขเป็นมิตร - มีเพื่อนดี คนที่ไว้ใจได้ ความภักดี",
            bite: "สุนัขกัด - มีคนทรยศ เพื่อนหักหลัง ระวังคนรอบข้าง",
            protect: "สุนัขปกป้อง - มีคนคอยช่วยเหลือ รู้สึกปลอดภัย",
            lost: "สุนัขหาย - สูญเสียความไว้วางใจ มิตรภาพแตกร้าว"
        }
    },
    
    cat: {
        keyword: ["แมว", "cat"],
        meaning: "แมวสื่อถึงความเป็นอิสระ ความลึกลับ ความเป็นหญิง หรือสัญชาตญาณ",
        interpretation: {
            friendly: "แมวเป็นมิตร - ความเป็นอิสระ ชีวิตสมดุล ความนุ่มนวล",
            attack: "แมวทำร้าย - ความกลัวการถูกหลอกลวง ปัญหาจากผู้หญิง",
            black: "แมวดำ - ความลึกลับ สัญชาตญาณแรงกล้า โชคร้าย (ตามความเชื่อ)",
            many: "แมวเยอะ - ความสับสนในความรู้สึก ต้องการความเป็นตัวของตัวเอง"
        }
    },
    
    // สิ่งของ
    money: {
        keyword: ["เงิน", "money", "ทอง", "ทรัพย์สิน", "ร่ำรวย"],
        meaning: "เงินสื่อถึงคุณค่า พลังงาน ความมั่นใจ หรือความปรารถนา",
        interpretation: {
            find: "เจอเงิน - โชคลาภ โอกาสใหม่ ความมั่นใจเพิ่มขึ้น",
            lose: "เสียเงิน - ความกลัวการสูญเสีย ความไม่มั่นคงทางการเงิน ควรระวัง",
            rich: "รวยมาก - ความมั่นใจ ความสำเร็จ แต่อาจหมายถึงค่านิยมที่ผิด",
            steal: "เงินถูกขโมย - กลัวสูญเสียสิ่งสำคัญ รู้สึกไม่ปลอดภัย"
        }
    },
    
    house: {
        keyword: ["บ้าน", "house", "ที่อยู่", "เรือน"],
        meaning: "บ้านสื่อถึงตัวตน ครอบครัว ความปลอดภัย",
        interpretation: {
            new: "บ้านใหม่ - การเริ่มต้นใหม่ ตัวตนใหม่ โอกาสใหม่",
            old: "บ้านเก่า - อดีต ความทรงจำ รากเหง้า",
            collapse: "บ้านพัง - วิกฤตครอบครัว ความมั่นคงสั่นคลอน",
            clean: "บ้านสะอาด - จิตใจสงบ ชีวิตเป็นระเบียบ"
        }
    },
    
    car: {
        keyword: ["รถ", "car", "รถยนต์", "ขับรถ"],
        meaning: "รถสื่อถึงการควบคุมชีวิต ทิศทาง ความก้าวหน้า",
        interpretation: {
            drive: "ขับรถ - ควบคุมชีวิตได้ มีทิศทาง มั่นใจ",
            crash: "รถชน - สูญเสียการควบคุม ปัญหาใหญ่กำลังมา ระวังตัว",
            nocontrol: "ควบคุมไม่ได้ - รู้สึกไร้อำนาจ ชีวิตออกนอกลู่นอกทาง",
            passenger: "นั่งรถ - ปล่อยให้คนอื่นควบคุม ยอมรับสถานการณ์"
        }
    },
    
    // สถานที่
    school: {
        keyword: ["โรงเรียน", "school", "มหาวิทยาลัย", "ห้องเรียน"],
        meaning: "โรงเรียนสื่อถึงการเรียนรู้ บทเรียนชีวิต ความกลัวการถูกตัดสิน",
        interpretation: {
            exam: "สอบ - ถูกทดสอบในชีวิตจริง กังวลเรื่องความสามารถ",
            late: "ไปโรงเรียนสาย - กลัวพลาดโอกาส ความกดดัน",
            unprepared: "ไม่พร้อมสอบ - รู้สึกไม่พร้อมกับสถานการณ์ ควรเตรียมตัว",
            graduate: "จบการศึกษา - จบบทเรียน ก้าวไปสู่ระดับใหม่"
        }
    },
    
    temple: {
        keyword: ["วัด", "temple", "พระ", "สวด"],
        meaning: "วัดสื่อถึงความสงบ ศรัทธา การแสวงหาความหมาย",
        interpretation: {
            pray: "ไหว้พระ - ต้องการความช่วยเหลือจากสิ่งศักดิ์สิทธิ์ ต้องการความสงบใจ",
            peaceful: "วัดสงบ - จิตใจสงบ ควรหาเวลาทำสมาธิ ชีวิตมีสมดุล",
            monk: "เห็นพระ - ความรู้ ปัญญา คำแนะนำจากผู้รู้"
        }
    },
    
    // อื่นๆ
    teeth: {
        keyword: ["ฟัน", "teeth", "ฟันหลุด", "ฟันหัก"],
        meaning: "ฟันสื่อถึงความมั่นใจ พลัง ความสามารถในการสื่อสาร",
        interpretation: {
            fall: "ฟันหลุด - กลัวสูญเสียพลัง กังวลเรื่องรูปลักษณ์ ความไม่มั่นใจ",
            break: "ฟันหัก - การสื่อสารมีปัญหา รู้สึกอ่อนแอ",
            clean: "ฟันสะอาด - มั่นใจ สุขภาพดี สื่อสารได้ดี",
            rotten: "ฟันผุ - ปัญหาที่สะสมมานาน สุขภาพเสื่อม"
        }
    },
    
    test: {
        keyword: ["สอบ", "test", "ข้อสอบ", "คะแนน"],
        meaning: "การสอบสื่อถึงการถูกทดสอบ ความกดดัน ความกลัวความล้มเหลว",
        interpretation: {
            fail: "สอบตก - กลัวความล้มเหลว ความไม่มั่นใจ ควรเตรียมตัวให้ดี",
            pass: "สอบผ่าน - จะผ่านการทดสอบชีวิต ความมั่นใจ ความสำเร็จ",
            noprepare: "ไม่ได้เตรียมตัว - รู้สึกไม่พร้อม ชีวิตมีสิ่งที่ยังไม่จบ"
        }
    }
};

// Helper function to interpret dream
function interpretDream(dreamText) {
    const text = dreamText.toLowerCase();
    const results = [];
    
    for (const [key, dream] of Object.entries(dreamMeanings)) {
        // Check if any keyword matches
        const hasKeyword = dream.keyword.some(keyword => 
            text.includes(keyword.toLowerCase())
        );
        
        if (hasKeyword) {
            results.push({
                symbol: key,
                meaning: dream.meaning,
                interpretations: dream.interpretation
            });
        }
    }
    
    return results;
}

// Export for use in chatbot
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { dreamMeanings, interpretDream };
}
